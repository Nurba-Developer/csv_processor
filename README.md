# CSV Processor

**Консольное Python-приложение для удобной обработки CSV-файлов с возможностями фильтрации и агрегации данных.**

---

## Возможности

- Фильтрация строк по условию на одну колонку (например: `price > 100`)
- Агрегация числовых данных по одной колонке:
  - Среднее значение (`avg`)
  - Минимальное значение (`min`)
  - Максимальное значение (`max`)
- Поддержка основных операторов сравнения для фильтрации

---

## Установка

1. Клонируйте репозиторий:

```bash
git clone https://github.com/Nurba-Developer/csv_processor.git
cd csv_processor
````

2. Установите зависимости:

```bash
pip install -r requirements.txt
```

Или, если используете Poetry или PEP 621:

```bash
pip install .
```

---

## Использование

Запуск скрипта с фильтрацией:

```bash
python main.py --file data/sample.csv --filter "price > 100"
```

Запуск скрипта с агрегацией:

```bash
python main.py --file data/sample.csv --aggregate "price avg"
```

---

## Поддерживаемые операторы

### Фильтрация (`--filter`)

| Оператор | Описание         |
| -------- | ---------------- |
| `==`     | Равно            |
| `!=`     | Не равно         |
| `>`      | Больше           |
| `<`      | Меньше           |
| `>=`     | Больше или равно |
| `<=`     | Меньше или равно |

### Агрегация (`--aggregate`)

| Операция | Описание              |
| -------- | --------------------- |
| `avg`    | Среднее значение      |
| `min`    | Минимальное значение  |
| `max`    | Максимальное значение |

---

## Примеры

Фильтрация товаров с ценой больше 100:

```bash
python main.py --file data/sample.csv --filter "price > 100"
```

Средняя цена товаров:

```bash
python main.py --file data/sample.csv --aggregate "price avg"
```

---

## Тестирование

Для запуска тестов используется `pytest`:

```bash
pytest
```

### Что проверяется:

* Корректность фильтрации по числовым и текстовым полям
* Агрегация по числовым колонкам
* Обработка ошибок: неверные команды, отсутствующие колонки, нечисловые данные

---

## Структура проекта

```
csv_processor/
├── commands/
│   ├── __init__.py
│   ├── aggregate.py       # Функции агрегации
│   └── filter.py          # Функции фильтрации
├── tests/
│   ├── test_aggregate.py  # Тесты для агрегации
│   └── test_filter.py     # Тесты для фильтрации
├── main.py                # Точка входа и обработка аргументов
├── requirements.txt       # Зависимости проекта
└── README.md              # Документация проекта
```

---

## Требования

* Python 3.10 и выше
* Для тестирования: `pytest`
* Для красивого вывода таблиц: `tabulate` (автоматически установлен из `requirements.txt`)

---

## Советы и рекомендации

* Используйте `--filter` и `--aggregate` по отдельности, комбинированные фильтры и агрегации пока не поддерживаются
* Обязательно проверяйте корректность формата команд:

  * Для фильтрации: `<column> <operator> <value>`
  * Для агрегации: `<column> <operation>`
* При необходимости расширения функционала, код организован так, что легко добавить новые операции и фильтры

---
